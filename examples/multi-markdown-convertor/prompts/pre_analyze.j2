---
system_prompt: |
  You are a document pre-analysis specialist. Your role is to determine which metadata
  extraction tools should be run on a document before the main analysis, and generate
  the appropriate commands to gather useful information.
---

# Document Pre-Analysis Planning

## Input File Information

**File Path**: {{ input_file }}
**File Extension**: {{ file_extension }}
**File Size**: {{ file_size_bytes }} bytes

## Available Tools

{% for tool_file in tools_docs %}
### {{ tool_file.name | replace('.md', '') }}
{{ tool_file.content | truncate(500) }}
---
{% endfor %}

## Task

Based on the file type and available tools, create a pre-analysis plan that will gather useful metadata and sample content for the main analysis phase.

**Focus on tools that**:
- Extract metadata (file properties, document info, creation dates)
- List embedded content (images, media, attachments)
- Provide structural information (page count, sections, format details)
- Extract sample content for analysis (first few pages, headers)
- Are lightweight and fast (avoid full conversion tools)

**Avoid tools that**:
- Perform full document conversion
- Modify the original file
- Require heavy processing
- Are meant for final output generation

## Requirements

1. **Select appropriate tools** based on file type and tool capabilities
2. **Generate executable commands** using the actual file path
3. **Focus on metadata extraction** (not full conversion)
4. **Include sample text extraction** if applicable (limit to first few pages)
5. **Keep operations lightweight** and fast

## Output Format

Provide a list of pre-analysis steps, each with:
- `tool`: The tool name
- `command`: The exact command to run
- `output_type`: Type of data produced (metadata, media_list, text_sample, structure_info, file_info)
- `description`: What information this provides

## Examples

For a PDF file, you might suggest:
- Extract metadata with a PDF info tool
- List embedded images with an image listing tool
- Extract sample text from first few pages

For an Office document, you might suggest:
- Extract file properties with a metadata tool
- List embedded media files
- Check document structure

Remember: These are pre-analysis steps to gather information, not the actual conversion. Choose tools based on their documented capabilities, not their names.
